<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø·Ù„Ø¨ ØªÙ‚Ø¯ÙŠÙ… ÙƒÙ…Ø¹Ù„Ù…</title>
<style>
  body {
    background-color: #e6f0ff;
    font-family: 'Tajawal', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  .form-container {
    background: white;
    padding: 30px;
    width: 100%;
    max-width: 450px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    text-align: center;
  }
  h2 { color: #013a75; }
  input, select, textarea, button {
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    border: 2px solid #007bff;
    border-radius: 6px;
    font-size: 16px;
    box-sizing: border-box;
  }
  .phone-group { display: flex; gap: 10px; }
  .phone-group select { width: 35%; }
  .phone-group input { width: 65%; }
  .terms-box {
    height: 100px;
    overflow-y: scroll;
    border: 1px solid #ccc;
    padding: 10px;
    text-align: right;
    margin-bottom: 10px;
  }
  button { background-color: #013a75; color: white; border: none; font-weight: bold; cursor: pointer; }
  button:hover { background-color: #0055aa; }
</style>
</head>
<body>
<div class="form-container">
  <h2>Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… ÙƒÙ…Ø¹Ù„Ù…</h2>
  <form id="teacherForm">
    <div class="terms-box">
      <h3>Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†:</h3>
      <ul>
        <li>ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø¹Ù„Ù… Ù…Ø¤Ù‡Ù„Ø§Ù‹ ÙˆÙ…Ø¬Ø±Ø¨Ø§Ù‹.</li>
        <li>Ø§Ø­ØªØ±Ø§Ù… Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯.</li>
        <li>Ø§Ù„Ù…Ù†ØµØ© ØºÙŠØ± Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù† Ø£ÙŠ Ø®Ù„Ø§ÙØ§Øª Ø´Ø®ØµÙŠØ©.</li>
        <li>ÙŠØ¬Ø¨ ØªÙ‚Ø¯ÙŠÙ… Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø© ÙˆÙ…ÙˆØ«ÙˆÙ‚Ø©.</li>
      </ul>
    </div>
    <label>
      <input type="checkbox" id="agreeTerms" required>
      Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†
    </label>

    <input type="text" id="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
    <input type="text" id="subject" placeholder="Ø§Ù„ØªØ®ØµØµ" required>

    <div class="phone-group">
      <select id="prefix" required>
        <option value="+966">+966 ğŸ‡¸ğŸ‡¦</option>
        <option value="+971">+971 ğŸ‡¦ğŸ‡ª</option>
        <option value="+965">+965 ğŸ‡°ğŸ‡¼</option>
        <option value="+20">+20 ğŸ‡ªğŸ‡¬</option>
      </select>
      <input type="tel" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„" required>
    </div>

    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
    <textarea id="notes" rows="4" placeholder="Ù†Ø¨Ø°Ø© / Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©" required></textarea>

    <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
  </form>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAGjFbcG0KGlFPoYt0EP16nIKbK2ci_IQw",
  authDomain: "siraj-74f58.firebaseapp.com",
  projectId: "siraj-74f58",
  storageBucket: "siraj-74f58.appspot.com",
  messagingSenderId: "60485496189",
  appId: "1:60485496189:web:10dcae7bd8865f91d47014"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

document.getElementById('teacherForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const agree = document.getElementById('agreeTerms').checked;
  if (!agree) { alert('ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· Ø£ÙˆÙ„Ø§Ù‹.'); return; }

  const name = document.getElementById('name').value.trim();
  const subject = document.getElementById('subject').value.trim();
  const prefix = document.getElementById('prefix').value;
  const phone = document.getElementById('phone').value.trim();
  const email = document.getElementById('email').value.trim();
  const notes = document.getElementById('notes').value.trim();

  if (!name || !subject || !phone || !email || !notes) {
    alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„.');
    return;
  }

  try {
    await addDoc(collection(db, 'teacherApplications'), {
      name,
      subject,
      phone: prefix + phone,
      email,
      notes,
      status: 'pending',
      submittedAt: serverTimestamp()
    });
    alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.');
    e.target.reset();
  } catch (err) {
    alert('Ø­Ø¯Ø« Ø®Ø·Ø£: ' + err.message);
  }
});
</script>
</body>
</html>
